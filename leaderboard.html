<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leaderboard - English Learning SMP</title>
  <link rel="stylesheet" href="style.css">
  <script src="auth.js"></script>
  <script src="data.js"></script>
  <style>
    .leaderboard-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .leaderboard-header {
      text-align: center;
      margin-bottom: 30px;
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .user-login-section {
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }

    .login-form {
      display: flex;
      gap: 15px;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
    }

    .login-input {
      padding: 12px 20px;
      border: 2px solid #ddd;
      border-radius: 25px;
      font-size: 16px;
      min-width: 200px;
      transition: border-color 0.3s;
    }

    .login-input:focus {
      outline: none;
      border-color: #3498db;
    }

    .login-btn {
      padding: 12px 25px;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
    }

    .login-btn:hover {
      background: #2980b9;
      transform: translateY(-2px);
    }

    .user-info {
      text-align: center;
      padding: 20px;
      background: linear-gradient(135deg, #3498db, #2ecc71);
      color: white;
      border-radius: 15px;
      margin-bottom: 20px;
    }

    .user-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      margin: 0 auto 15px;
      color: #3498db;
    }

    .user-name {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .user-rank {
      font-size: 18px;
      opacity: 0.9;
    }

    .user-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .user-stat {
      text-align: center;
    }

    .user-stat-number {
      font-size: 20px;
      font-weight: bold;
    }

    .user-stat-label {
      font-size: 12px;
      opacity: 0.8;
    }

    .logout-btn {
      background: rgba(255,255,255,0.2);
      color: white;
      border: 1px solid rgba(255,255,255,0.3);
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 12px;
      margin-top: 10px;
      transition: all 0.3s;
    }

    .logout-btn:hover {
      background: rgba(255,255,255,0.3);
    }
    
    .podium {
      display: flex;
      justify-content: center;
      align-items: end;
      margin-bottom: 30px;
      gap: 20px;
      padding: 20px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .podium-place {
      text-align: center;
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      border-radius: 15px;
      padding: 20px;
      transition: transform 0.3s;
      position: relative;
      min-width: 150px;
    }
    
    .podium-place:hover {
      transform: translateY(-5px);
    }
    
    .podium-place.first {
      background: linear-gradient(135deg, #ffd700, #ffed4e);
      order: 2;
      height: 200px;
      border: 3px solid #f39c12;
    }
    
    .podium-place.second {
      background: linear-gradient(135deg, #c0c0c0, #e8e8e8);
      order: 1;
      height: 160px;
      border: 3px solid #95a5a6;
    }
    
    .podium-place.third {
      background: linear-gradient(135deg, #cd7f32, #d4926f);
      order: 3;
      height: 120px;
      border: 3px solid #e67e22;
    }

    .podium-place.current-user {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(52, 152, 219, 0); }
      100% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0); }
    }
    
    .podium-number {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .podium-emoji {
      font-size: 40px;
      margin-bottom: 10px;
    }
    
    .podium-name {
      font-weight: bold;
      margin-bottom: 5px;
      font-size: 16px;
    }
    
    .podium-score {
      font-size: 18px;
      color: #2c3e50;
      font-weight: bold;
    }
    
    .leaderboard-table {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    
    .table-header {
      background: linear-gradient(135deg, #3498db, #2980b9);
      color: white;
      padding: 20px;
      font-weight: bold;
      text-align: center;
    }
    
    .player-row {
      display: grid;
      grid-template-columns: 60px 1fr 80px 120px 100px 100px;
      align-items: center;
      padding: 15px 20px;
      border-bottom: 1px solid #ecf0f1;
      transition: background-color 0.3s;
    }
    
    .player-row:hover {
      background: #f8f9fa;
    }

    .player-row.current-user {
      background: linear-gradient(90deg, rgba(52, 152, 219, 0.1), rgba(52, 152, 219, 0.05));
      border-left: 4px solid #3498db;
      font-weight: bold;
    }
    
    .player-row:last-child {
      border-bottom: none;
    }
    
    .rank {
      font-size: 18px;
      font-weight: bold;
      color: #3498db;
      text-align: center;
    }
    
    .rank.top3 {
      color: #e74c3c;
    }
    
    .player-info {
      display: flex;
      flex-direction: column;
    }
    
    .player-name {
      font-weight: bold;
      font-size: 16px;
      color: #2c3e50;
    }
    
    .player-level {
      font-size: 12px;
      color: #7f8c8d;
    }
    
    .player-score {
      font-size: 18px;
      font-weight: bold;
      color: #27ae60;
      text-align: center;
    }
    
    .player-quizzes {
      text-align: center;
      color: #7f8c8d;
    }
    
    .player-vocab {
      text-align: center;
      color: #7f8c8d;
    }
    
    .player-streak {
      text-align: center;
      color: #e67e22;
      font-weight: bold;
    }
    
    .achievements {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-top: 5px;
    }
    
    .achievement-badge {
      background: #3498db;
      color: white;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 10px;
      font-weight: bold;
    }
    
    .achievement-badge.grammar {
      background: #9b59b6;
    }
    
    .achievement-badge.vocabulary {
      background: #e74c3c;
    }
    
    .achievement-badge.streak {
      background: #f39c12;
    }
    
    .stats-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: white;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .stat-icon {
      font-size: 40px;
      margin-bottom: 10px;
    }
    
    .stat-number {
      font-size: 28px;
      font-weight: bold;
      color: #3498db;
      margin-bottom: 5px;
    }
    
    .stat-label {
      color: #7f8c8d;
      font-size: 14px;
    }
    
    .filters {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .filter-btn {
      padding: 8px 16px;
      border: 2px solid #3498db;
      background: white;
      color: #3498db;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
      font-weight: bold;
    }
    
    .filter-btn.active, .filter-btn:hover {
      background: #3498db;
      color: white;
    }
    
    .empty-state {
      text-align: center;
      padding: 50px;
      color: #7f8c8d;
    }
    
    .empty-state-icon {
      font-size: 80px;
      margin-bottom: 20px;
    }

    .guest-message {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      color: #856404;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      margin-bottom: 20px;
    }

    .quick-actions {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .action-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
      text-decoration: none;
      display: inline-block;
    }

    .action-btn.primary {
      background: #3498db;
      color: white;
    }

    .action-btn.secondary {
      background: #95a5a6;
      color: white;
    }

    .action-btn:hover {
      transform: translateY(-2px);
    }
    
    @media (max-width: 768px) {
      .leaderboard-container {
        padding: 15px;
      }

      .login-form {
        flex-direction: column;
      }

      .login-input {
        width: 100%;
        min-width: unset;
      }
      
      .podium {
        flex-direction: column;
        align-items: center;
      }
      
      .podium-place {
        order: unset !important;
        width: 100%;
        height: auto !important;
        margin-bottom: 15px;
      }
      
      .player-row {
        grid-template-columns: 40px 1fr;
        gap: 10px;
      }
      
      .player-quizzes,
      .player-vocab,
      .player-streak {
        display: none;
      }
      
      .stats-section {
        grid-template-columns: repeat(2, 1fr);
      }

      .user-stats {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>üèÜ Leaderboard</h1>
    <a href="index.html">‚Üê Kembali</a>
  </header>

  <div class="leaderboard-container">
    <div class="leaderboard-header">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <a href="dashboard.html" style="background: #3498db; color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: bold; transition: all 0.3s;">‚Üê Dashboard</a>
        <h2 style="margin: 0;">Papan Peringkat English Learning SMP</h2>
        <div></div>
      </div>
      <p>Lihat prestasi terbaik dari seluruh siswa!</p>
    </div>

    <!-- User Login/Info Section -->
    <div id="userSection" class="user-login-section">
      <div id="loginForm" class="login-form" style="display: none;">
        <h3 style="width: 100%; text-align: center; margin-bottom: 20px;">Masuk untuk Melihat Peringkat Anda</h3>
        <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
          <a href="index.html" class="login-btn" style="text-decoration: none; display: inline-block;">Kembali ke Login</a>
        </div>
      </div>
      <div id="userInfo" class="user-info" style="display: none;">
        <div class="user-avatar" id="userAvatar">üë§</div>
        <div class="user-name" id="userName"></div>
        <div class="user-rank" id="userRank"></div>
        <div class="user-stats">
          <div class="user-stat">
            <div class="user-stat-number" id="userScore">0</div>
            <div class="user-stat-label">Skor</div>
          </div>
          <div class="user-stat">
            <div class="user-stat-number" id="userQuizzes">0</div>
            <div class="user-stat-label">Quiz</div>
          </div>
          <div class="user-stat">
            <div class="user-stat-number" id="userVocab">0</div>
            <div class="user-stat-label">Vocabulary</div>
          </div>
          <div class="user-stat">
            <div class="user-stat-number" id="userStreak">0</div>
            <div class="user-stat-label">Streak</div>
          </div>
        </div>
        <button onclick="app.logout()" class="logout-btn">Keluar</button>
      </div>
    </div>

    <!-- Guest Message -->
    <div id="guestMessage" class="guest-message">
      <p><strong>üí° Tips:</strong> Masuk dengan nama Anda untuk melihat posisi peringkat dan statistik pribadi!</p>
      <div class="quick-actions">
        <a href="quiz.html" class="action-btn primary">Mulai Quiz</a>
        <a href="vocab.html" class="action-btn primary">Pelajari Vocabulary</a>
        <a href="listening.html" class="action-btn secondary">Latihan Listening</a>
      </div>
    </div>
    
    <div class="stats-section">
      <div class="stat-card">
        <div class="stat-icon">üë•</div>
        <div class="stat-number" id="totalStudents">0</div>
        <div class="stat-label">Total Siswa</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üìä</div>
        <div class="stat-number" id="avgScore">0</div>
        <div class="stat-label">Rata-rata Skor</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üî•</div>
        <div class="stat-number" id="maxStreak">0</div>
        <div class="stat-label">Streak Terpanjang</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üìö</div>
        <div class="stat-number" id="totalQuizzes">0</div>
        <div class="stat-label">Total Quiz Diselesaikan</div>
      </div>
    </div>
    
    <div class="filters">
      <button class="filter-btn active" data-filter="all">Semua Level</button>
      <button class="filter-btn" data-filter="Advanced">Advanced</button>
      <button class="filter-btn" data-filter="Intermediate">Intermediate</button>
      <button class="filter-btn" data-filter="Beginner">Beginner</button>
    </div>
    
    <div id="podium" class="podium"></div>
    
    <div class="leaderboard-table">
      <div class="table-header">
        <h3>Peringkat Lengkap</h3>
      </div>
      <div id="leaderboardContent"></div>
    </div>
  </div>

  <script>
    class Leaderboard {
      constructor() {
        this.currentFilter = 'all';
        this.currentUser = null;
        this.leaderboardData = [...leaderboardData]; // Use data from data.js
        this.localData = JSON.parse(localStorage.getItem("leaderboard")) || [];
        this.userProfiles = JSON.parse(localStorage.getItem("userProfiles")) || {};
        this.currentSession = JSON.parse(localStorage.getItem("currentUser")) || null;
        this.init();
      }
      
      init() {
        this.combineData();
        this.setupEventListeners();
        this.loadCurrentUser();
        this.updateStats();
        this.renderLeaderboard();
      }

      loadCurrentUser() {
        if (this.currentSession) {
          this.currentUser = this.currentSession;
          this.showUserInfo();
        } else {
          this.showLoginForm();
        }
      }

      login() {
        const username = document.getElementById('usernameInput').value.trim();
        if (!username) {
          alert('Silakan masukkan nama Anda!');
          return;
        }

        // Get or create user profile
        let userProfile = this.userProfiles[username];
        if (!userProfile) {
          userProfile = {
            name: username,
            score: 0,
            level: 'Beginner',
            completedQuizzes: 0,
            vocabularyMastered: 0,
            streak: 0,
            lastActive: new Date().toISOString().split('T')[0],
            achievements: [],
            joinDate: new Date().toISOString().split('T')[0]
          };
          this.userProfiles[username] = userProfile;
          localStorage.setItem("userProfiles", JSON.stringify(this.userProfiles));
        } else {
          // Update last active
          userProfile.lastActive = new Date().toISOString().split('T')[0];
          this.userProfiles[username] = userProfile;
          localStorage.setItem("userProfiles", JSON.stringify(this.userProfiles));
        }

        this.currentUser = userProfile;
        localStorage.setItem("currentUser", JSON.stringify(this.currentUser));
        
        this.combineData();
        this.showUserInfo();
        this.renderLeaderboard();
      }

      logout() {
        this.currentUser = null;
        localStorage.removeItem("currentUser");
        this.showLoginForm();
        this.renderLeaderboard();
      }

      showLoginForm() {
        document.getElementById('loginForm').style.display = 'block';
        document.getElementById('userInfo').style.display = 'none';
        document.getElementById('guestMessage').style.display = 'block';
      }

      showUserInfo() {
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('userInfo').style.display = 'block';
        document.getElementById('guestMessage').style.display = 'none';

        // Update user info display
        const userRank = this.getUserRank();
        document.getElementById('userAvatar').textContent = this.getAvatarEmoji(this.currentUser.name);
        document.getElementById('userName').textContent = this.currentUser.name;
        document.getElementById('userRank').textContent = `Peringkat #${userRank} - ${this.currentUser.level}`;
        document.getElementById('userScore').textContent = this.currentUser.score;
        document.getElementById('userQuizzes').textContent = this.currentUser.completedQuizzes;
        document.getElementById('userVocab').textContent = this.currentUser.vocabularyMastered;
        document.getElementById('userStreak').textContent = this.currentUser.streak;
      }

      getAvatarEmoji(name) {
        const emojis = ['üë®‚Äçüéì', 'üë©‚Äçüéì', 'üßë‚Äçüíº', 'üë§', 'üéØ', 'üìö', 'üåü', 'üí°'];
        const index = name.charCodeAt(0) % emojis.length;
        return emojis[index];
      }

      getUserRank() {
        const sortedData = this.leaderboardData.sort((a, b) => b.score - a.score);
        const userIndex = sortedData.findIndex(player => player.name === this.currentUser.name);
        return userIndex + 1;
      }

      updateUserProgress(scoreToAdd, quizzesCompleted = 0, vocabLearned = 0) {
        if (!this.currentUser) return;

        this.currentUser.score += scoreToAdd;
        this.currentUser.completedQuizzes += quizzesCompleted;
        this.currentUser.vocabularyMastered += vocabLearned;
        
        // Update streak logic
        const today = new Date().toISOString().split('T')[0];
        const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];
        
        if (this.currentUser.lastActive === yesterday) {
          this.currentUser.streak += 1;
        } else if (this.currentUser.lastActive !== today) {
          this.currentUser.streak = 1;
        }
        
        this.currentUser.lastActive = today;
        
        // Update level based on score
        this.currentUser.level = this.getLevelFromScore(this.currentUser.score);
        
        // Update achievements
        this.currentUser.achievements = this.getAchievementsFromScore(this.currentUser.score);
        
        // Save to localStorage
        this.userProfiles[this.currentUser.name] = this.currentUser;
        localStorage.setItem("userProfiles", JSON.stringify(this.userProfiles));
        localStorage.setItem("currentUser", JSON.stringify(this.currentUser));
        
        // Update displays
        this.combineData();
        this.showUserInfo();
        this.renderLeaderboard();
      }
      
      setupEventListeners() {
        // Filter buttons
        document.querySelectorAll('.filter-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            e.target.classList.add('active');
            this.currentFilter = e.target.dataset.filter;
            this.renderLeaderboard();
          });
        });

        // Enter key for login
        document.getElementById('usernameInput').addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            this.login();
          }
        });
      }
      
      combineData() {
        // Start with predefined data
        const combinedData = [...leaderboardData];
        
        // Add user profiles
        Object.values(this.userProfiles).forEach(userProfile => {
          const existingIndex = combinedData.findIndex(p => p.name === userProfile.name);
          if (existingIndex === -1) {
            combinedData.push(userProfile);
          } else {
            // Update if user profile has higher score
            if (userProfile.score > combinedData[existingIndex].score) {
              combinedData[existingIndex] = userProfile;
            }
          }
        });
        
        // Add legacy local storage data
        this.localData.forEach(localPlayer => {
          const existingIndex = combinedData.findIndex(p => p.name === localPlayer.nama);
          if (existingIndex === -1) {
            combinedData.push({
              name: localPlayer.nama,
              score: localPlayer.skor,
              level: this.getLevelFromScore(localPlayer.skor),
              completedQuizzes: Math.floor(localPlayer.skor / 50),
              vocabularyMastered: Math.floor(localPlayer.skor / 20),
              streak: Math.floor(Math.random() * 5) + 1,
              lastActive: new Date().toISOString().split('T')[0],
              achievements: this.getAchievementsFromScore(localPlayer.skor)
            });
          }
        });
        
        this.leaderboardData = combinedData.sort((a, b) => b.score - a.score);
      }
      
      getLevelFromScore(score) {
        if (score >= 500) return 'Advanced';
        if (score >= 300) return 'Intermediate';
        return 'Beginner';
      }
      
      getAchievementsFromScore(score) {
        const achievements = [];
        if (score >= 50) achievements.push('Getting Started');
        if (score >= 150) achievements.push('Quick Learner');
        if (score >= 300) achievements.push('Dedicated Student');
        if (score >= 500) achievements.push('Grammar Explorer');
        if (score >= 700) achievements.push('Vocabulary Champion');
        if (score >= 850) achievements.push('Grammar Master');
        if (score >= 1000) achievements.push('English Pro');
        return achievements;
      }
      
      getFilteredData() {
        if (this.currentFilter === 'all') {
          return this.leaderboardData;
        }
        return this.leaderboardData.filter(player => player.level === this.currentFilter);
      }
      
      updateStats() {
        const totalStudents = this.leaderboardData.length;
        const avgScore = totalStudents > 0 ? Math.round(this.leaderboardData.reduce((sum, p) => sum + p.score, 0) / totalStudents) : 0;
        const maxStreak = totalStudents > 0 ? Math.max(...this.leaderboardData.map(p => p.streak || 0)) : 0;
        const totalQuizzes = this.leaderboardData.reduce((sum, p) => sum + (p.completedQuizzes || 0), 0);
        
        document.getElementById('totalStudents').textContent = totalStudents;
        document.getElementById('avgScore').textContent = avgScore;
        document.getElementById('maxStreak').textContent = maxStreak;
        document.getElementById('totalQuizzes').textContent = totalQuizzes;
      }
      
      renderPodium(data) {
        const podium = document.getElementById('podium');
        
        if (data.length === 0) {
          podium.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üèÜ</div><h3>Belum ada data untuk filter ini</h3></div>';
          return;
        }
        
        const top3 = data.slice(0, 3);
        const positions = ['ü•á', 'ü•à', 'ü•â'];
        const classes = ['first', 'second', 'third'];
        
        podium.innerHTML = top3.map((player, index) => {
          const isCurrentUser = this.currentUser && player.name === this.currentUser.name;
          return `
            <div class="podium-place ${classes[index]} ${isCurrentUser ? 'current-user' : ''}">
              <div class="podium-number">#${index + 1}</div>
              <div class="podium-emoji">${positions[index]}</div>
              <div class="podium-name">${player.name} ${isCurrentUser ? '(Anda)' : ''}</div>
              <div class="podium-score">${player.score} pts</div>
            </div>
          `;
        }).join('');
      }
      
      renderTable(data) {
        const content = document.getElementById('leaderboardContent');
        
        if (data.length === 0) {
          content.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üìä</div><h3>Belum ada data untuk filter ini</h3></div>';
          return;
        }
        
        content.innerHTML = data.map((player, index) => {
          const isCurrentUser = this.currentUser && player.name === this.currentUser.name;
          return `
            <div class="player-row ${isCurrentUser ? 'current-user' : ''}">
              <div class="rank ${index < 3 ? 'top3' : ''}">#${index + 1}</div>
              <div class="player-info">
                <div class="player-name">${player.name} ${isCurrentUser ? '(Anda)' : ''}</div>
                <div class="player-level">${player.level}</div>
                <div class="achievements">
                  ${(player.achievements || []).map(achievement => `
                    <span class="achievement-badge ${this.getAchievementClass(achievement)}">${achievement}</span>
                  `).join('')}
                </div>
              </div>
              <div class="player-score">${player.score}</div>
              <div class="player-quizzes">${player.completedQuizzes || 0} quiz</div>
              <div class="player-vocab">${player.vocabularyMastered || 0} kata</div>
              <div class="player-streak">${player.streak || 0} hari</div>
            </div>
          `;
        }).join('');
      }
      
      getAchievementClass(achievement) {
        if (achievement.includes('Grammar')) return 'grammar';
        if (achievement.includes('Vocabulary')) return 'vocabulary';
        if (achievement.includes('Streak')) return 'streak';
        return '';
      }
      
      renderLeaderboard() {
        const filteredData = this.getFilteredData();
        this.renderPodium(filteredData);
        this.renderTable(filteredData);
        this.updateStats();
      }
    }
    
    // Initialize the leaderboard
    const app = new Leaderboard();

    // Make updateUserProgress available globally for other pages
    window.updateUserProgress = function(scoreToAdd, quizzesCompleted = 0, vocabLearned = 0) {
      if (app) {
        app.updateUserProgress(scoreToAdd, quizzesCompleted, vocabLearned);
      }
    };
  </script>
</body>
</html>
